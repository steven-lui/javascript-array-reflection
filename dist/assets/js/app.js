"use strict";import{MailImg}from"./MailImg.js";let idMax=1082,list=[];const getRandomID=()=>Math.floor(Math.random()*idMax)+1;function imageToHTML(t,i,a,e){$(i).attr("src",`https://picsum.photos/id/${t.id}/${a}/${e}`),$(i).text("alt",`Image by ${t.author}`)}function ajaxRequest(t,i,a={}){return new Promise(((e,o)=>{$.ajax({url:i,type:t,data:a,success:function(t){e(t)},error:function(t){o(t)}})}))}function getImageToHTML(t=getRandomID(),i="#picsum-img",a=1200,e=1200){ajaxRequest("GET",`https://picsum.photos/id/${t}/info`).then((t=>{imageToHTML(t,i,a,e)})).catch((t=>console.log(t)))}function displayTable(){let t=$("#mail-list .table-group-divider");t.empty(),list.forEach((i=>{let a=`<tr id="row-${i.mailTo}">`;$(a).prependTo(t);let e=`<td id="email-${i.mailTo}">${i.mailTo}</td>`;$(e).appendTo($(`#row-${i.mailTo}`));let o=`<td><ul id="images-${i.mailTo}"></ul></td>`;$(o).appendTo($(`#row-${i.mailTo}`)),i.idList.forEach((t=>{$(`<img id="image-${t}"></li>`).appendTo($(`#images-${i.mailTo}`)),getImageToHTML(t,`#image-${t}`,200,200)}))}))}function validateEmail(t){return!0}$((function(){getImageToHTML()})),$("#add-email").on("click",(function(t){t.preventDefault();let i=$("#user-email").val();if(validateEmail(i)){let t=$("#picsum-img").attr("src");t=t.split("/")[4];let a=!1;for(let e=0;e<list.length;++e)if(list[e].mailTo===i){list[e].addId(t),a=!0;break}a||list.push(new MailImg(i,t)),displayTable(),getImageToHTML()}}));