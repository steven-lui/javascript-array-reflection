"use strict";class MailImg{constructor(i="",t=""){this._mailTo=i,this._idList=[t]}get mailTo(){return this._mailTo}get idList(){return this._idList}set mailTo(i){this._mailTo=i}set idList(i){this._idList=i}addId=i=>this._idList.unshift(i);removeiD=i=>{this._idList.splice(this.idList.indexOf(i),1)}}let idMax=1082,list=[];const getRandomID=()=>Math.floor(Math.random()*idMax)+1;function imageToHTML(i,t,a,e){$(t).attr("src",`https://picsum.photos/id/${i.id}/${a}/${e}`),$(t).text("alt",`Image by ${i.author}`)}function ajaxRequest(i,t,a={}){return new Promise(((e,l)=>{$.ajax({url:t,type:i,data:a,success:function(i){e(i)},error:function(i){l(i)}})}))}function getImageToHTML(i=getRandomID(),t="#picsum-img",a=1200,e=1200){ajaxRequest("GET",`https://picsum.photos/id/${i}/info`).then((i=>{imageToHTML(i,t,a,e)})).catch((i=>console.log(i)))}function displayTable(){let i=$("#mail-list .table-group-divider");i.empty(),list.forEach((t=>{let a=`<tr id="row-${t.mailTo}">`;$(a).prependTo(i);let e=`<td id="email-${t.mailTo}">${t.mailTo}</td>`;$(e).appendTo($(`#row-${t.mailTo}`));let l=`<td><ul id="images-${t.mailTo}"></ul></td>`;$(l).appendTo($(`#row-${t.mailTo}`)),t.idList.forEach((i=>{$(`<li><img class="img-fluid" id="image-${i}"></li>`).appendTo($(`#images-${t.mailTo}`)),getImageToHTML(i,`#image-${i}`,100,100)}))}))}function validateEmail(i){return!0}$((function(){getImageToHTML()})),$("#add").on("click",(function(i){i.preventDefault();let t=$("#user-email").val();if(validateEmail(t)){let i=$("#picsum-img").attr("src");i=i.split("/")[4];let a=!1;for(let e=0;e<list.length;++e)if(list[e].mailTo===t){list[e].addId(i),a=!0;break}a||list.push(new MailImg(t,i)),displayTable(),getImageToHTML()}}));