function ajaxRequest(i,t,a={}){return new Promise(((e,s)=>{$.ajax({url:t,type:i,data:a,success:function(i){e(i)},error:function(i){s(i)}})}))}function applyDataToImg(i,t,a,e){"#picsum-img"===t&&$(".new-image__image").empty().append('<img class="img-fluid" id="picsum-img" src="">'),$(t).attr("src",`https://picsum.photos/id/${i.id}/${a}/${e}`),$(t).attr("alt",`Credit to ${i.author}`)}let maxId=1082;const getRandomID=()=>Math.floor(Math.random()*maxId)+1;export function ajaxToImg(i,t,a,e){ajaxRequest("GET",`https://picsum.photos/id/${i}/info`).then((i=>{applyDataToImg(i,t,a,e)})).catch((i=>{}))}export async function randomImg(){let i,t=!1;for(let a=0;a<5;++a){let a=Math.floor(Math.random()*maxId)+1;if(await ajaxRequest("GET",`https://picsum.photos/id/${a}/info`).then((a=>{i=a,t=!0})).catch((i=>{})),t){applyDataToImg(i,"#picsum-img",400,400);break}}t||$("#picsum-img").attr("src","./assets/img/not-found.jpg")}export class MailImg{constructor(i="",t=""){this._mailTo=i,this._idList=[t]}get mailTo(){return this._mailTo}get idList(){return this._idList}set mailTo(i){this._mailTo=i}set idList(i){this._idList=i}addId=i=>this._idList.push(i);removeiD=i=>{this._idList.splice(this.idList.indexOf(i),1)}}let mailList=[];function displayTable(){let i=$("#mail-list .table-group-divider");i.empty(),mailList.forEach((t=>{let a=t.mailTo.replace("@","-").replace(".","-");$(`<tr id="row-${a}">`).prependTo(i);let e=`<td id="email-${a}">${t.mailTo}</td>`;$(e).appendTo($(`#row-${a}`)),$(`<td><ul id="images-${a}"></ul></td>`).appendTo($(`#row-${a}`)),t.idList.forEach((i=>{$(`<img id="image-${i}"></li>`).prependTo($(`#images-${a}`)),ajaxToImg(i,`#image-${i}`,50,50)}))}))}function validateEmail(i){return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(i)}$((function(){randomImg(),$('label[for="user-email"]').hide()})),$("#add-email").on("click",(function(i){i.preventDefault();let t=$("#user-email").val();if(validateEmail(t)){let i=$("#picsum-img").attr("src");i=i.split("/")[4];let a=!1;for(let e=0;e<mailList.length;++e)if(mailList[e].mailTo===t){mailList[e].addId(i),a=!0;break}a||mailList.push(new MailImg(t,i)),displayTable(),randomImg()}else $('label[for="user-email"]').show().delay(5e3).hide(),$("#user-email").focus()})),$(".new-image__button").on("click",(function(i){randomImg()}));