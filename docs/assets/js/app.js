"use strict";import{MailImg}from"./MailImg.js";import{ajaxToImg,randomImg}from"./xhr.js";let mailList=[];function displayTable(){let i=$("#mail-list .table-group-divider");i.empty(),mailList.forEach((a=>{let e=a.mailTo.replace("@","-").replace(".","-");$(`<tr id="row-${e}">`).prependTo(i);let l=`<td id="email-${e}">${a.mailTo}</td>`;$(l).appendTo($(`#row-${e}`)),$(`<td><ul id="images-${e}"></ul></td>`).appendTo($(`#row-${e}`)),a.idList.forEach((i=>{$(`<img id="image-${i}"></li>`).prependTo($(`#images-${e}`)),ajaxToImg(i,`#image-${i}`,50,50)}))}))}function validateEmail(i){return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(i)}$((function(){randomImg(),$('label[for="user-email"]').hide()})),$("#add-email").on("click",(function(i){i.preventDefault();let a=$("#user-email").val();if(validateEmail(a)){let i=$("#picsum-img").attr("src");i=i.split("/")[4];let e=!1;for(let l=0;l<mailList.length;++l)if(mailList[l].mailTo===a){mailList[l].addId(i),e=!0;break}e||mailList.push(new MailImg(a,i)),displayTable(),randomImg()}else console.log("Bad email:",$("#user-email").val()),$('label[for="user-email"]').show().delay(5e3).hide(),$("#user-email").focus()}));